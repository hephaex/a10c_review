# ARM10C 86주차 후기
##### 일시 : 2015.01.10 (86주차)
##### 모임명 : NAVER개발자커뮤니티지원_IAMROOT.ORG_10차ARM-C
##### 장소 : 토즈 타워점
##### 장소지원 : NAVER 개발자 커뮤니티 지원 프로그램
##### 참여인원 :  3명
============

## 86주차 진도
* start_kernel()->time_init(); 진행중

## time.c
* start_kernel()->time_init()->of_clk_init(NULL);

```time.c
// ARM10C 20150103
void __init time_init(void)
{
	// machine_desc->init_time: __mach_desc_EXYNOS5_DT.init_time: NULL
	if (machine_desc->init_time) {
		machine_desc->init_time();
	} else {
#ifdef CONFIG_COMMON_CLK // CONFIG_COMMON_CLK=y
		of_clk_init(NULL);
#endif
		clocksource_of_init();
	}
}
```

## clk.c
* start_kernel()->time_init()->of_clk_init(NULL)->of_clk_init()

```clk.c
// ARM10C 20150103
// NULL
void __init of_clk_init(const struct of_device_id *matches)
{
	const struct of_device_id *match;
	struct device_node *np;

	// matches: NULL
	if (!matches)
		// __clk_of_table:
		// __clk_of_table_fixed_factor_clk
		// __clk_of_table_fixed_clk
		// __clk_of_table_exynos4210_audss_clk
		// __clk_of_table_exynos5250_audss_clk
		// __clk_of_table_exynos5420_clk
		matches = __clk_of_table;
		// matches:
		// __clk_of_table_fixed_factor_clk
		// __clk_of_table_fixed_clk
		// __clk_of_table_exynos4210_audss_clk
		// __clk_of_table_exynos5250_audss_clk
		// __clk_of_table_exynos5420_clk

	for_each_matching_node_and_match(np, matches, &match) {
	// for (np = of_find_matching_node_and_match(NULL, matches, &match);
	//      np; np = of_find_matching_node_and_match(np, matches, &match))

		// np: devtree에서 allnext로 순회 하면서 찾은 clock node의 주소, match: __clk_of_table_exynos5420_clk

		// match->data: __clk_of_table_exynos5420_clk.data: exynos5420_clk_init
		of_clk_init_cb_t clk_init_cb = match->data;
		// clk_init_cb: exynos5420_clk_init

		// clk_init_cb: exynos5420_clk_init,
		// np: devtree에서 allnext로 순회 하면서 찾은 clock node의 주소
		// exynos5420_clk_init(devtree에서 allnext로 순회 하면서 찾은 clock node의 주소)
		clk_init_cb(np);
	}
}
```

## clk-exynos5420.c:clk_init_cb()
* start_kernel()->time_init()->of_clk_init(NULL)->of_clk_init()->exynos5420_clk_init()

```clk-exynos5420.c
/* register exynos5420 clocks */
// ARM10C 20150103
// devtree에서 allnext로 순회 하면서 찾은 clock node의 주소
static void __init exynos5420_clk_init(struct device_node *np)
{
	void __iomem *reg_base;

// 2015/01/03 종료
// 2015/01/10 시작

	// np: devtree에서 allnext로 순회 하면서 찾은 clock node의 주소
	if (np) {
		// np: devtree에서 allnext로 순회 하면서 찾은 clock node의 주소
		reg_base = of_iomap(np, 0);
		if (!reg_base)
			panic("%s: failed to map registers\n", __func__);
	} else {
		panic("%s: unable to determine soc\n", __func__);
	}
```

* start_kernel()->time_init()->of_clk_init(NULL)->of_clk_init()->exynos5420_clk_init()->of_iomap();
 - // np: devtree에서 allnext로 순회 하면서 찾은 clock node의 주소
 - reg_base = of_iomap(np, 0);

## 
# log
* 1st log

```
   5ad5c32..e5f8cd1  master     -> origin/master
Updating 5ad5c32..e5f8cd1
Fast-forward
arch/arm/include/asm/bitops.h        |   2 ++
arch/arm/include/asm/io.h            |   2 ++
arch/arm/mm/ioremap.c                |  37 +++++++++++++++++++++++
drivers/clk/samsung/clk-exynos5420.c |   1 +
drivers/of/address.c                 |  15 ++++++++++
include/linux/kernel.h               |   1 +
include/linux/list.h                 |   5 ++++
include/linux/rbtree.h               |   2 ++
include/uapi/linux/kernel.h          |   2 ++
lib/rbtree.c                         |   2 ++
mm/vmalloc.c                         | 123 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
11 files changed, 192 insertions(+)
```
